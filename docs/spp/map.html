<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_bb999c6ead2032cdbbecec15fac0fe78 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>

            <style>html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            </style>

            <style>#map {
                position:absolute;
                top:0;
                bottom:0;
                right:0;
                left:0;
                }
            </style>

            <script>
                L_NO_TOUCH = false;
                L_DISABLE_3D = false;
            </script>

        
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.1.0/leaflet.markercluster.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.1.0/MarkerCluster.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.1.0/MarkerCluster.Default.css"/>
    
        <script src="https://unpkg.com/esri-leaflet@3.0.12/dist/esri-leaflet.js"></script>
        
</head>
<body>
    
    
    <div style="position: fixed; bottom: 30px; left: 30px; z-index: 1000;
                background-color: white; border: 2px solid grey; padding: 10px;
                border-radius: 5px; font-size: 13px; opacity: 0.9; max-height: 80vh;
                overflow-y: auto;">
    <b>Southwest Power Pool Constraint Classification</b><br>
    <i style="background: #e74c3c; width: 12px; height: 12px; display: inline-block; border-radius: 50%;"></i> Transmission<br>
    <i style="background: #3498db; width: 12px; height: 12px; display: inline-block; border-radius: 50%;"></i> Generation<br>
    <i style="background: #9b59b6; width: 12px; height: 12px; display: inline-block; border-radius: 50%;"></i> Both<br>
    <i style="background: #2ecc71; width: 12px; height: 12px; display: inline-block; border-radius: 50%;"></i> Unconstrained<br>
    <hr style="margin: 4px 0;">
    <b>Data Centers</b><br>
    <i style="background: #27ae60; width: 12px; height: 12px; display: inline-block; border-radius: 50%;"></i> Operational<br>
    <i style="background: #3498db; width: 12px; height: 12px; display: inline-block; border-radius: 50%;"></i> Proposed<br>
    <i style="background: #e67e22; width: 12px; height: 12px; display: inline-block; border-radius: 50%;"></i> Construction<br>
    <hr style="margin: 4px 0;">
    <b>Transmission Lines</b><br>
    <i style="background: #8b0000; width: 16px; height: 4px; display: inline-block;"></i> 765 kV+<br>
    <i style="background: #cc0000; width: 16px; height: 3px; display: inline-block;"></i> 500 kV<br>
    <i style="background: #e65c00; width: 16px; height: 3px; display: inline-block;"></i> 345 kV<br>
    <i style="background: #ff8c00; width: 16px; height: 3px; display: inline-block;"></i> 230 kV<br>
    <hr style="margin: 4px 0;">
    <b>Pnode Severity Tier</b><br>
    <i style="background: #e74c3c; width: 12px; height: 12px; display: inline-block; border-radius: 50%;"></i> Critical (&ge;0.75)<br>
    <i style="background: #e67e22; width: 12px; height: 12px; display: inline-block; border-radius: 50%;"></i> Elevated (&ge;0.50)<br>
    <i style="background: #f1c40f; width: 12px; height: 12px; display: inline-block; border-radius: 50%;"></i> Moderate (&ge;0.25)<br>
    <i style="background: #27ae60; width: 12px; height: 12px; display: inline-block; border-radius: 50%;"></i> Low (&lt;0.25)<br>
    <br><i>Marker size = severity score</i>
    </div>
    
    
            <div class="folium-map" id="map_bb999c6ead2032cdbbecec15fac0fe78" ></div>
        
</body>
<script>
    
    
            var map_bb999c6ead2032cdbbecec15fac0fe78 = L.map(
                "map_bb999c6ead2032cdbbecec15fac0fe78",
                {
                    center: [37.0, -98.0],
                    crs: L.CRS.EPSG3857,
                    ...{
  "zoom": 5,
  "zoomControl": true,
  "preferCanvas": false,
}

                }
            );

            

        
    
            var tile_layer_08f536aa02976d4989b226d6d972bd5e = L.tileLayer(
                "https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",
                {
  "minZoom": 0,
  "maxZoom": 20,
  "maxNativeZoom": 20,
  "noWrap": false,
  "attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors \u0026copy; \u003ca href=\"https://carto.com/attributions\"\u003eCARTO\u003c/a\u003e",
  "subdomains": "abcd",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            tile_layer_08f536aa02976d4989b226d6d972bd5e.addTo(map_bb999c6ead2032cdbbecec15fac0fe78);
        
    
            var feature_group_d64f864e64f8d88304e621e91814e73a = L.featureGroup(
                {
}
            );
        
    
            feature_group_d64f864e64f8d88304e621e91814e73a.addTo(map_bb999c6ead2032cdbbecec15fac0fe78);
        
    
            var feature_group_f1f79f1553e08711fb730d2c0438d978 = L.featureGroup(
                {
}
            );
        
    
            var marker_cluster_55f5cbafcb274fb3afed3a8d289bb990 = L.markerClusterGroup(
                {
  "maxClusterRadius": 50,
  "disableClusteringAtZoom": 10,
}
            );
        
    
            marker_cluster_55f5cbafcb274fb3afed3a8d289bb990.addTo(feature_group_f1f79f1553e08711fb730d2c0438d978);
        
    
            feature_group_f1f79f1553e08711fb730d2c0438d978.addTo(map_bb999c6ead2032cdbbecec15fac0fe78);
        
    
        var esri_transmission_layer_7f3d7a6888db4e445f5cd56d3d1bef91 = L.esri.featureLayer({
            url: 'https://services1.arcgis.com/Hp6G80Pky0om7QvQ/arcgis/rest/services/Electric_Power_Transmission_Lines/FeatureServer/0',
            where: "VOLTAGE >= 230",
            style: function(feature) {
                var v = (feature.properties || {}).VOLTAGE || 0;
                if (v >= 500) return {color: '#cc0000', weight: 3, opacity: 0.8};
                if (v >= 345) return {color: '#e65c00', weight: 2.5, opacity: 0.7};
                if (v >= 230) return {color: '#ff8c00', weight: 1.5, opacity: 0.6};
                return {color: '#aaa', weight: 1, opacity: 0.4};
            },
            onEachFeature: function(feature, layer) {
                var p = feature.properties || {};
                layer.bindTooltip(
                    (p.VOLTAGE || '?') + ' kV | ' + (p.OWNER || 'Unknown')
                        + (p.SUB_1 ? '<br>' + p.SUB_1 + ' \u2192 ' + (p.SUB_2 || '?') : ''),
                    {sticky: true}
                );
            }
        }).addTo(map_bb999c6ead2032cdbbecec15fac0fe78);

        setTimeout(function() {
            var overlays = document.querySelectorAll('.leaflet-control-layers-overlays');
            if (overlays.length > 0) {
                var label = document.createElement('label');
                var div = document.createElement('div');
                var input = document.createElement('input');
                input.type = 'checkbox';
                input.className = 'leaflet-control-layers-selector';
                input.checked = true;
                input.addEventListener('change', function() {
                    if (this.checked) {
                        esri_transmission_layer_7f3d7a6888db4e445f5cd56d3d1bef91.addTo(map_bb999c6ead2032cdbbecec15fac0fe78);
                    } else {
                        map_bb999c6ead2032cdbbecec15fac0fe78.removeLayer(esri_transmission_layer_7f3d7a6888db4e445f5cd56d3d1bef91);
                    }
                });
                var span = document.createElement('span');
                span.textContent = ' HIFLD Transmission Lines';
                label.appendChild(div);
                div.appendChild(input);
                div.appendChild(span);
                overlays[0].appendChild(label);
            }
        }, 200);
        
    
            var layer_control_7c2909003ffd59247efe90850c18b65c_layers = {
                base_layers : {
                    "cartodbpositron" : tile_layer_08f536aa02976d4989b226d6d972bd5e,
                },
                overlays :  {
                    "Zone Classifications" : feature_group_d64f864e64f8d88304e621e91814e73a,
                    "Data Center Clusters" : feature_group_f1f79f1553e08711fb730d2c0438d978,
                },
            };
            let layer_control_7c2909003ffd59247efe90850c18b65c = L.control.layers(
                layer_control_7c2909003ffd59247efe90850c18b65c_layers.base_layers,
                layer_control_7c2909003ffd59247efe90850c18b65c_layers.overlays,
                {
  "position": "topright",
  "collapsed": true,
  "autoZIndex": true,
}
            ).addTo(map_bb999c6ead2032cdbbecec15fac0fe78);

        
</script>
</html>